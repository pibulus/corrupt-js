/**
 * corrupt.js - Interactive text corruption library
 * v0.1.0
 *
 * A lightweight, framework-agnostic library for adding interactive
 * glitch/corruption effects to text on hover.
 *
 * @author Pablo Alvarado
 * @license MIT
 * @inspiration Inspired by baffle.js but focused on interaction
 */(function(u,c){typeof define=="function"&&define.amd?define([],c):typeof module=="object"&&module.exports?module.exports=c():u.Corrupt=c()})(typeof self<"u"?self:this,function(){"use strict";const u={witchhouse:{chars:"\u2593\u2591\u2592\u2588\u26E7\u2620\u2720\u26B8\u25EC\u25ED\u25AA\u25AB\u25FE\u25FD",rate:.3,maxCorruptions:2},sparkle:{chars:"\u2728\u{1F4AB}\u2B50\u{1F31F}\u2726\u2727\u2661\u25C7\u{1F496}\u{1F308}",rate:.25,maxCorruptions:1},matrix:{chars:"01\uFF5C\u2571\u2572\uFF0F\uFF3C\u2318\u25CA\u2206\u2207",rate:.35,maxCorruptions:3},glitch:{chars:"xX\xD7\u2A2F\u203B\u2042\u25CA!@#$%",rate:.2,maxCorruptions:2},zalgo:{chars:"\u0338\u0335\u0336\u0337\u0334\u0353\u034E\u033A\u033B\u033C",rate:.4,maxCorruptions:4},melt:{chars:"\u2584\u2580\u2590\u258C\u2596\u2597\u2598\u259D\u259A\u259E",rate:.3,maxCorruptions:3},ascii:{chars:"@#$%^&*()_+-=",rate:.25,maxCorruptions:2}};class c{constructor(t,e={}){this.elements=this.getElements(t),this.options={style:e.style||"glitch",rate:e.rate||null,maxCorruptions:e.maxCorruptions||null,sticky:e.sticky||!1,flicker:e.flicker||!1,wave:e.wave||!1,preserveSpaces:e.preserveSpaces!==!1,preserveEnds:e.preserveEnds!==!1,delay:e.delay||0},this.activeAnimations=new Map,this.init()}getElements(t){return typeof t=="string"?Array.from(document.querySelectorAll(t)):t instanceof NodeList?Array.from(t):t instanceof HTMLElement?[t]:Array.isArray(t)?t:[]}init(){this.elements.forEach(t=>{t.dataset.original||(t.dataset.original=t.textContent);const e=t.dataset.corruptStyle||this.options.style,i=t.dataset.corruptRate||this.options.rate,o=t.dataset.corruptChars||this.options.maxCorruptions;t.addEventListener("mouseenter",n=>{this.options.delay>0?setTimeout(()=>{t.matches(":hover")&&this.corrupt(t,e,i,o)},this.options.delay):this.corrupt(t,e,i,o)}),t.addEventListener("mouseleave",n=>{this.restore(t)})})}corrupt(t,e,i,o){const n=u[e]||u.glitch,r=t.dataset.original||t.textContent,s=i||n.rate,a=o||n.maxCorruptions;if(this.options.wave)this.waveCorrupt(t,r,n,s,a);else if(this.options.flicker)this.flickerCorrupt(t,r,n,s,a);else{const f=this.corruptText(r,n.chars,s,a);t.textContent=f}}corruptText(t,e,i,o){let n=0;const r=t.split(""),s=[];return r.forEach((l,h)=>{this.options.preserveEnds&&(h===0||h===t.length-1)||this.options.preserveSpaces&&l===" "||s.push(h)}),s.sort(()=>Math.random()-.5).slice(0,Math.min(o,Math.floor(s.length*i))).forEach(l=>{r[l]=e[Math.floor(Math.random()*e.length)]}),r.join("")}flickerCorrupt(t,e,i,o,n){let r=!1;const a=setInterval(()=>{r?t.textContent=e:t.textContent=this.corruptText(e,i.chars,o,n),r=!r},50);this.activeAnimations.set(t,a)}waveCorrupt(t,e,i,o,n){let r=0;const s=e.split(""),f=setInterval(()=>{const l=[...s],h=3;for(let p=0;p<h;p++){const d=(r+p)%e.length;this.options.preserveSpaces&&s[d]===" "||(l[d]=i.chars[Math.floor(Math.random()*i.chars.length)])}t.textContent=l.join(""),r=(r+1)%e.length},100);this.activeAnimations.set(t,f)}restore(t){this.activeAnimations.has(t)&&(clearInterval(this.activeAnimations.get(t)),this.activeAnimations.delete(t));const e=t.dataset.original;this.options.sticky&&Math.random()<.1?setTimeout(()=>{t.textContent=e},500):t.textContent=e}static init(t=".corrupt",e={}){const i=document.querySelectorAll(t);return new c(i,e)}static addStyle(t,e){u[t]=e}static getStyles(){return Object.keys(u)}static corruptString(t,e="glitch",i=.3,o=2){const n=u[e]||u.glitch;let r=0;return t.split("").map((s,a)=>a===0||a===t.length-1||s===" "?s:Math.random()<i&&r<o?(r++,n.chars[Math.floor(Math.random()*n.chars.length)]):s).join("")}}return typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{c.init()}):setTimeout(()=>c.init(),0)),c});
